<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PDF Problem Solver</title>

<style>
body{font-family:Arial;background:#eef2f5;padding:20px}
.container{max-width:900px;margin:auto;background:#fff;padding:20px;border-radius:6px}
h2{text-align:center}
button{padding:10px;margin:5px 0;width:100%;font-size:15px}
.preview{margin-top:15px}
iframe{width:100%;height:400px;border:1px solid #ccc}
</style>
</head>

<body>

<div class="container">
<h2>PDF Problem Solver</h2>

<!-- SINGLE PDF -->
<h3>ðŸ”„ Rotate PDF</h3>
<input type="file" id="singlePdf" accept="application/pdf">
<button onclick="loadSingle()">Load & Preview</button>
<button onclick="rotatePdf()">Rotate 90Â°</button>
<button onclick="downloadSingle()">Download Final PDF</button>

<div class="preview">
<iframe id="singlePreview"></iframe>
</div>

<hr>

<!-- MERGE PDF -->
<h3>ðŸ“„ Merge PDFs</h3>
<input type="file" id="mergePdf" accept="application/pdf" multiple>
<button onclick="mergePdfs()">Merge & Preview</button>
<button onclick="downloadMerged()">Download Merged PDF</button>

<div class="preview">
<iframe id="mergePreview"></iframe>
</div>

</div>

<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>

<script>
let singlePdfBytes = null;
let mergedPdfBytes = null;
let rotationAngle = 0;

// LOAD SINGLE PDF
async function loadSingle(){
 const file = document.getElementById("singlePdf").files[0];
 if(!file){ alert("Upload PDF"); return; }
 singlePdfBytes = await file.arrayBuffer();
 rotationAngle = 0;
 preview(singlePdfBytes,"singlePreview");
}

// ROTATE UNLIMITED
async function rotatePdf(){
 if(!singlePdfBytes){ alert("Load PDF first"); return; }
 rotationAngle = (rotationAngle + 90) % 360;

 const pdfDoc = await PDFLib.PDFDocument.load(singlePdfBytes);
 pdfDoc.getPages().forEach(p=>{
   p.setRotation(PDFLib.degrees(rotationAngle));
 });

 singlePdfBytes = await pdfDoc.save();
 preview(singlePdfBytes,"singlePreview");
}

// DOWNLOAD SINGLE
function downloadSingle(){
 if(!singlePdfBytes){ alert("Nothing to download"); return; }
 download(singlePdfBytes,"rotated.pdf");
}

// MERGE UNLIMITED PDFs
async function mergePdfs(){
 const files = document.getElementById("mergePdf").files;
 if(files.length < 2){
   alert("Select at least 2 PDFs");
   return;
 }

 const merged = await PDFLib.PDFDocument.create();

 for(let i=0;i<files.length;i++){
   const bytes = await files[i].arrayBuffer();
   const pdf = await PDFLib.PDFDocument.load(bytes);
   const pages = await
